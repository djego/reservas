var carrito_animado=true;function agregar_habitacion_carrito(b,e,i,f,a,d){var c=$("#habitacion_"+i+" .boton_agregar");var g=$("#habitacion_"+i+" .boton_agregar").clone().appendTo(".motor-base .izquierda .disponibilidad div.habitacion .tarifa .content2 ul.pensiones");$(g).attr("style","position:absolute; left:"+$(d).offset().left+"px; top:"+$(d).offset().top+"px;");if($("#frame-carrito-compra .content").position().left){$(g).stop().animate({left:($("#frame-carrito-compra .content").position().left+20)+"px",top:($("#frame-carrito-compra .content").offset().top+30)+"px",opacity:"0"},"slow",function(){$(this).remove();});}var h=new Array();$(".ocupantes_"+i).each(function(m,j){var k=$(j).attr("id").split("_")[1];var l=$(j).val();if((l!="")&&(l>0)){h[h.length]=k+"-"+l;}});$.ajax({type:"POST",url:b,data:{codigo_hotel:e,id_habitacion:i,id_tarifa:f,id_pension:a,ocupantes:h},success:function(l){var k=l.substring(0,1);if(k=="@"){var j=l.split("#");$(g).remove();alert(j[1]);}else{$("#frame-carrito-compra .content").html(l);$("#frame-carrito-compra .content").hide();$("#frame-carrito-compra .content").fadeIn("slow");animacion_carrito();}},error:function(j){},beforeSend:function(){$("#frame-carrito-compra .content").html('<img src="/static/images/motor/disponibilidad/cargando.gif" style="margin-left:auto; margin-right:auto; display:block; margin-top:25px;"/>');}});}function quitar_habitacion_carrito(b,c,f,e,d,a){$.ajax({type:"POST",url:c,data:{codigo_hotel:f,id_habitacion:b,id_pension:e},success:function(i){var h=i.substring(0,1);if(h=="@"){var g=i.split("#");alert(g[1]);}else{$(d).html(i);$(d).hide();$(d).fadeIn("slow");animacion_carrito();}$(a).css({top:($(d).height()+15)+"px"});},error:function(g){},beforeSend:function(){$(d).html('<img src="/static/images/motor/disponibilidad/cargando.gif" style="margin-left:auto; margin-right:auto; display:block; margin-top:25px;"/>');}});}function animacion_carrito(){if($("#frame-carrito-compra").height()>$(window).height()){carrito_animado=false;}else{carrito_animado=true;}}function carga_carrito(b){$(window).scroll(function(){if(carrito_animado){if(($(window).scrollTop()>200)&&($(window).scrollTop()<($(".motor-base .contenedor").height()-250))){if(($(window).scrollTop()-($("#frame-carrito-compra .content").height()/2))>=0){$("#frame-carrito-compra").stop().animate({marginTop:($(window).scrollTop()-($("#frame-carrito-compra .content").height()/2)-45)+"px"},"slow");}}else{if($(window).scrollTop()<200){$("#frame-carrito-compra").stop().animate({marginTop:"0px"},"slow");}}}else{$("#frame-carrito-compra").stop().animate({marginTop:"0px"},"slow");}});if(b){var a=$("#frame-carrito-compra").attr("url")+"&disponibilidad=1";$.get(a,function(c){$("#frame-carrito-compra .content").html(c);$("#frame-carrito-compra .content").hide();$("#frame-carrito-compra .content").fadeIn("slow");animacion_carrito();});}else{$.get($("#frame-carrito-compra").attr("url"),function(c){$("#frame-carrito-compra .content").html(c);$("#frame-carrito-compra .content").hide();$("#frame-carrito-compra .content").fadeIn("slow");});}}function toogle_hoteles_carrito(b,a){$(b).slideToggle("slow",function(){if($(b).is(":visible")){$(a).removeClass("maximizar");}else{$(a).addClass("maximizar");}});}function toggle_carrito_superior(b,f,a,e,c){var d=$(a).css("top");if(d=="-232px"){$(b).css({opacity:0});$.get(c,function(g){$(a).html(g);$(a).animate({top:"0px"});$(b).animate({top:($(a).height()+15)+"px",opacity:1});$(b).addClass("activa");});$(e).css({height:$(document).height()+"px"});$(e).css("z-index",9);$(e).animate({opacity:0.8});}else{$(a).animate({top:"-232px"});$(b).animate({top:"0px"});$(b).removeClass("activa");$(e).animate({opacity:0},function(){$(a).html(f);});$(e).css("z-index",-100);}}function toggle_carrito_superior_v2(b,h,a,g,d,c){if(c==undefined){var c=9;}var f=$(a).css("top");var e=$(b).position().left;if(f=="-235px"){$(b).css({position:"absolute","z-index":"10",left:e+"px"});$.get(d,function(i){$(a).html(i);$(a).animate({top:"0px"});$(b).animate({top:($(a).height()+15)+"px"});});$(g).css({height:$(document).height()+"px"});$(g).css("z-index",c);$(g).animate({opacity:0.8});}else{$(a).animate({top:"-235px"});$(b).animate({top:"0px"});$(b).css({position:"relative",left:"0px"});$(g).animate({opacity:0},function(){$(a).html(h);});$(g).css("z-index",-100);}}function agregar_servicio_carrito(b,g,f,a,e){var c=$("#servicio_"+f+" .boton_agregar");var h=$("#servicio_"+f+" .boton_agregar").clone().appendTo(".motor-base .izquierda .disponibilidad .dispo-servicios-extras ul li.grupo .grupo-content");$(h).attr("style","position:absolute; left:"+$(a).offset().left+"px; top:"+$(a).offset().top+"px;");if($("#frame-carrito-compra .content").position().left){$(h).stop().animate({left:($("#frame-carrito-compra .content").position().left+20)+"px",top:($("#frame-carrito-compra .content").offset().top+30)+"px",opacity:"0"},"slow",function(){$(this).remove();});}var d=$(e).datepicker("getDate");$.ajax({type:"POST",url:b,data:{codigo_hotel:g,id_servicio:f,dia:d.getDate()+"/"+(d.getMonth()+1)+"/"+d.getFullYear()},success:function(k){var j=k.substring(0,1);if(j=="@"){var i=k.split("#");$(h).remove();alert(i[1]);}else{$("#frame-carrito-compra .content").html(k);$("#frame-carrito-compra .content").hide();$("#frame-carrito-compra .content").fadeIn("slow");animacion_carrito();}},error:function(i){},beforeSend:function(){$("#frame-carrito-compra .content").html('<img src="/static/images/motor/disponibilidad/cargando.gif" style="margin-left:auto; margin-right:auto; display:block; margin-top:25px;"/>');}});}function eliminar_servicio_carrito(e,d,b,c,a){$.ajax({type:"POST",url:b,data:{codigo_hotel:e,id_servicio:d},success:function(h){var g=h.substring(0,1);if(g=="@"){var f=h.split("#");alert(f[1]);}else{$(c).html(h);$(c).hide();$(c).fadeIn("slow");animacion_carrito();}$(a).css({top:($(c).height()+15)+"px"});},error:function(f){},beforeSend:function(){$(c).html('<img src="/static/images/motor/disponibilidad/cargando.gif" style="margin-left:auto; margin-right:auto; display:block; margin-top:25px;"/>');}});}function agregar_paquete_carrito(c,g,b,a,f){var d=$(a);var h=$(a).clone().appendTo(".pension_content ul.habitaciones li.habitacion");$(h).attr("style","position:absolute; left:"+$(a).offset().left+"px; top:"+$(a).offset().top+"px;");if($("#frame-carrito-compra .content").position().left){$(h).stop().animate({left:($("#frame-carrito-compra .content").position().left+20)+"px",top:($("#frame-carrito-compra .content").offset().top+30)+"px",opacity:"0"},"slow",function(){$(this).remove();});}var e=$(f).datepicker("getDate");$.ajax({type:"POST",url:c,data:{codigo_hotel:g,id_habitacion:b,dia:e.getDate()+"/"+(e.getMonth()+1)+"/"+e.getFullYear()},success:function(k){var j=k.substring(0,1);if(j=="@"){var i=k.split("#");$(h).remove();alert(i[1]);}else{$("#frame-carrito-compra .content").html(k);$("#frame-carrito-compra .content").hide();$("#frame-carrito-compra .content").fadeIn("slow");animacion_carrito();}},error:function(i){},beforeSend:function(){$("#frame-carrito-compra .content").html('<img src="/static/images/motor/disponibilidad/cargando.gif" style="margin-left:auto; margin-right:auto; display:block; margin-top:25px;"/>');}});}function eliminar_paquete_carrito(e,b,c,d,a){$.ajax({type:"POST",url:c,data:{codigo_hotel:e,id_paquete:b},success:function(h){var g=h.substring(0,1);if(g=="@"){var f=h.split("#");alert(f[1]);}else{$(d).html(h);$(d).hide();$(d).fadeIn("slow");animacion_carrito();}$(a).css({top:($(d).height()+15)+"px"});},error:function(f){},beforeSend:function(){$(d).html('<img src="/static/images/motor/disponibilidad/cargando.gif" style="margin-left:auto; margin-right:auto; display:block; margin-top:25px;"/>');}});}function aplica_dto_forma_pago(c,a,b){$.ajax({type:"POST",url:a,data:{id_forma_pago:c},success:function(d){$(b).html(d);$(b).hide();$(b).fadeIn("slow");animacion_carrito();},beforeSend:function(){$(b).html('<img src="/static/images/motor/disponibilidad/cargando.gif" style="margin-left:auto; margin-right:auto; display:block; margin-top:25px;"/>');}});}